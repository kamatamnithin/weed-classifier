# ğŸŒ¿ Weed Classifier - VS Code Setup Guide

## ğŸ“‹ Prerequisites

1. **Node.js** (v18 or higher) - [Download](https://nodejs.org/)
2. **VS Code** - [Download](https://code.visualstudio.com/)
3. **Git** (optional) - [Download](https://git-scm.com/)

## ğŸš€ Step-by-Step Setup

### Step 1: Create Environment File

1. Copy `.env.example` to `.env`:
   ```bash
   cp .env.example .env
   ```

2. Get your Hugging Face API key:
   - Go to [https://huggingface.co/settings/tokens](https://huggingface.co/settings/tokens)
   - Click "New token"
   - Give it a name (e.g., "weed-classifier")
   - Copy the token (starts with `hf_`)

3. Edit `.env` file and add your key:
   ```env
   HUGGINGFACE_API_KEY=hf_your_actual_key_here
   ```

4. **IMPORTANT**: The Supabase credentials are automatically provided by Figma Make. When you export the project, they will be in `/utils/supabase/info.tsx`

### Step 2: Install Dependencies

Open terminal in VS Code (Terminal â†’ New Terminal) and run:

```bash
npm install
```

This will install all required packages including:
- React
- Supabase client
- Recharts (for statistics)
- jsPDF (for PDF export)
- All UI components

### Step 3: Update Main App File

The complete backend-integrated app is in `/src/app/AppBackend.tsx`. You need to:

1. **Backup your original App.tsx** (it has all the complete page implementations):
   ```bash
   cp src/app/App.tsx src/app/App.original.tsx
   ```

2. **Important**: The AppBackend.tsx file I created has the authentication logic but placeholder page components. You need to:
   
   - Open `src/app/App.original.tsx` (your backed up file)
   - Copy each page component (PredictionPage, AboutPage, HistoryPage, StatsPage, ComparePage)
   - Paste them into `src/app/AppBackend.tsx` replacing the placeholder versions
   - Add the `onSignOut` prop to each page's header (copy the pattern from LandingPage)

3. **Or** manually add authentication to your existing App.tsx:
   - Add the imports at the top (Session, Auth component, API functions)
   - Add authentication state (session, authLoading)
   - Add checkSession function
   - Wrap app in authentication check
   - Add SignOut button to headers

### Step 4: Add Sign Out Button to All Pages

In each page component header, after the theme toggle button, add:

```tsx
{userEmail && (
  <div className="flex items-center gap-2 pl-4 border-l border-gray-200 dark:border-gray-700">
    <span className="text-sm text-gray-600 dark:text-gray-400">{userEmail}</span>
    <button
      onClick={onSignOut}
      className="flex items-center gap-1 px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors"
    >
      <LogOut className="size-4" />
      Sign Out
    </button>
  </div>
)}
```

### Step 5: Run Development Server

```bash
npm run dev
```

The app will open at `http://localhost:5173`

## ğŸ”§ Project Structure

```
weed-classifier/
â”œâ”€â”€ .env                          # YOUR API KEYS (DO NOT COMMIT)
â”œâ”€â”€ .env.example                  # Template for environment variables
â”œâ”€â”€ .gitignore                    # Git ignore file
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ App.tsx              # Original app (all pages complete)
â”‚   â”‚   â”œâ”€â”€ AppBackend.tsx       # Backend-integrated version (needs pages copied)
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â””â”€â”€ Auth.tsx         # Sign in/Sign up component
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ supabase/
â”‚           â”œâ”€â”€ client.ts        # Supabase client
â”‚           â”œâ”€â”€ api.ts           # API functions
â”‚           â””â”€â”€ info.tsx         # Supabase credentials (auto-generated by Figma)
â””â”€â”€ supabase/
    â””â”€â”€ functions/
        â””â”€â”€ server/
            â”œâ”€â”€ index.tsx        # Backend server with ML integration
            â””â”€â”€ kv_store.tsx     # Database utilities (DO NOT EDIT)
```

## ğŸ¯ Features Included

### âœ… Backend (Supabase)
- User authentication (sign up/sign in)
- Secure image storage
- ML predictions via Hugging Face API
- Prediction history storage
- Statistics API

### âœ… Frontend (React)
- Beautiful sign in/sign up UI
- All original pages (Home, History, Stats, About, Compare)
- Dark mode support
- Drag & drop image upload
- PDF export
- Charts and statistics

## ğŸ” Security Notes

1. **Never commit .env file** - It's in .gitignore
2. **API keys are sensitive** - Don't share them
3. **Supabase credentials** - Automatically provided, don't modify `/utils/supabase/info.tsx`

## ğŸ› Troubleshooting

### "Module not found" errors
```bash
npm install
```

### Hugging Face API not working
- Check your API key in `.env`
- Make sure it starts with `hf_`
- The app will fall back to mock predictions if API fails

### Supabase errors
- Ensure you're running from VS Code (not Figma)
- Check that `/utils/supabase/info.tsx` exists (auto-created by Figma Make)

### Authentication not working
- Clear browser cache and localStorage
- Check browser console for errors
- Verify Supabase credentials are correct

## ğŸ“± How It Works

1. **User signs up/signs in** â†’ Supabase Auth
2. **Upload image** â†’ Sent to backend
3. **Backend calls Hugging Face API** â†’ Real ML prediction
4. **Result saved to database** â†’ Supabase KV Store
5. **History loaded from server** â†’ Real-time sync

## ğŸ“ Next Steps After Setup

1. Test sign up with a real email
2. Upload a test image
3. Check if prediction works (needs HuggingFace API key)
4. Verify history is saved
5. Test dark mode
6. Export a PDF report

## ğŸ’¡ Development Tips

### Hot Reload
Changes to React files auto-reload. Changes to backend require restart.

### View Logs
- Frontend: Browser console (F12)
- Backend: Will show in Supabase dashboard

### Testing
Test with these sample images:
- Crop: Corn, wheat, tomato plants
- Weed: Dandelion, thistle, unwanted grass

## ğŸš¨ Important Notes

1. **This won't run in Figma** - It needs Node.js environment
2. **HuggingFace API key required** - For real ML predictions
3. **Internet required** - For API calls to Supabase and Hugging Face
4. **Complete the AppBackend.tsx** - Copy page components from App.original.tsx

## ğŸ“ Need Help?

If you encounter issues:
1. Check this README again
2. Look at browser console for errors
3. Verify all files are in correct locations
4. Make sure .env file is properly configured

---

**Ready to run?** 

```bash
npm run dev
```

Then open http://localhost:5173 and sign up!
